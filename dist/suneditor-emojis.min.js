"use strict";const Emojis=function(){const i="suneditor-emojis-fav",o="suneditor-emojis-sup",s=!1,r={};let c={},a=void 0;function l(){var e;return(e=function(e){try{return JSON.parse(e)}catch(e){return!1}}(localStorage.getItem(i)))?e:(t(),[])}function t(){r[""]=[],localStorage.setItem(i,JSON.stringify(r[""]))}function u(e){const t=document.body.appendChild(document.createElement("span"));return t.appendChild(document.createTextNode(e)),e=parseFloat(t.offsetWidth),t.parentNode.removeChild(t),e}window.addEventListener("load",function(){a=u("üòÄ")});const m=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});function d(e){for(const n in r)if(""!==n)for(const i in r[n]){var t=r[n][i];if(t.emoji===e)return t}return!1}const e=function(){const e=document.currentScript.src.split("/");return e.pop(),e.join("/")},n=function(e){function t(e,t,n){e[n]=e[t],delete e[t]}var n=JSON.parse(e);r[""]=l();for(const i in n)r[i]=n[i],r[i].forEach(function(e){t(e,"n","name"),t(e,"e","emoji"),t(e,"s","skintone")})},f={neutral:"",light:127995,mediumLight:127996,medium:127997,mediumDark:127998,dark:127999};return{init:function(){!function(){if(s)return;const e=localStorage.getItem(o);c=e?JSON.parse(e):{}}();try{fetch(e()+"/data-by-group.16.min.json",{method:"GET",headers:{Accept:"application/json"}}).then(e=>e.text()).then(e=>n(e))}catch(e){console.log("fetchEmojis",e)}},getEmoji:d,isSupported:function(i){if(i in c)return c[i];var e,t;let n=void 0;return m.canvas.width=m.canvas.height=1,m.fillText(i,-4,4),0<m.getImageData(0,0,1,1).data[3]?u(i)>a&&(n=function(){var e=Array.from(i);if(1===e.length)return!1;let t=0;for(const n of e)/\p{Emoji}/u.test(n)&&t++;return 2<t}()?1:2):n=0,e=i,t=n,e&&(c[e]=t,s||localStorage.setItem(o,JSON.stringify(c))),n},registerEmoji:function(e){for(const n in r[""])if(r[""][n].emoji===e)return!1;var t=d(e);return r[""].push(t),localStorage.setItem(i,JSON.stringify(r[""])),!0},getRegistered:l,resetRegistered:t,toSkinTone:function(e,t){const n=/\p{Emoji_Modifier_Base}/gu;let i="";for(const o of e=e.replaceAll(/[\u{1F3FB}-\u{1F3FF}]/gu,""))65039!==o&&(i+=o,n.test(o)&&(i+=String.fromCodePoint(f[t])));return i},skinTones:Object.keys(f),emojis:r}}(),emojis=function(r){const c="se-emojis-menu",a="se-emojis-recent",l="se-emojis-result",u=["Smileys & Emotion","Activities","Animals & Nature","Flags","Food & Drink","Objects","People & Body","Symbols","Travel & Places"];let o=void 0,m={groups:u.slice(),captions:u.slice(),showRecent:!0,iconSize:"1.5rem",skinTone:"neutral",topmenu:{search:!1,skinTone:!1,iconSize:!1,recent:!1},showFallbacks:!1,tagName:"span"};const s=Object.assign({},m);r.init();function d(e){if(e&&""!==e.innerText){const t=document.createElement("i");t.classList.add("clear-recent"),t.title="Clear recent",t.innerHTML="&times;",t.onclick=function(){r.resetRegistered(),i()},e.appendChild(t)}}const f=function(e){var t,n=void 0===e;for(t in e=e||document.querySelector(".se-emojis-layer"),r.emojis){const i=e.querySelector('div[name="'+(t||a)+'"]');n&&(i.innerText=""),r.emojis[t]&&r.emojis[t].length?r.emojis[t].forEach(function(e){e&&i&&j(e,i)}):console.log("undefined"==typeof emoji?"emoji is undefined":`error: type:${t}, emoji:`+(emoji||"undefined"))}},p=function(t){if(t=t||document.querySelector('.se-emojis div[name="'+c+'"]')){t.innerText="";for(const e in m.topmenu)if(!0===m.topmenu[e])switch(e){case"iconSize":t.insertAdjacentHTML("beforeEnd",'<div class="topmenu-item"><span class="btn-iconsize" data-type="+" title="increase icon size">‚ûï</span><span class="btn-iconsize" data-type="-" title="decrease icon size">‚ûñ</span></div>'),setTimeout(function(){t.querySelectorAll(".btn-iconsize").forEach(function(e){e.onclick=function(){let t=parseFloat(m.iconSize);t="+"===e.getAttribute("data-type")?t+.2:t-.2,t+="rem",document.querySelectorAll(".se-emojis .se-emojis-group").forEach(function(e){e.style.fontSize=t}),m.iconSize=t}})});break;case"skinTone":{n=void 0;i=void 0;let e="";for(const o of r.skinTones.slice().reverse()){var n=o===m.skinTone?" btn-skintone-active":"",i=o.replace(/([A-Z])/g," $1").toLowerCase();e+='<span title="Skintone '+i+'" class="btn-skintone'+n+'" data-skintone="'+o+'" >'+r.toSkinTone("üëç",o)+"</span>"}t.insertAdjacentHTML("beforeEnd",'<div class="topmenu-item">'+e+"</div>"),t.querySelectorAll(".btn-skintone").forEach(function(e){e.onclick=function(){h(),m.skinTone=this.getAttribute("data-skintone"),f(),p(t)}})}break;case"search":!function(){t.insertAdjacentHTML("beforeEnd",'<div class=""><input class="se-emojis-search" type="search" placeholder="üîé" dir="rtl" max-length="7" size="7" spellcheck="false"></div>');const e=t.querySelector(".se-emojis-search");e.onclick=function(){e.removeAttribute("dir"),e.placeholder=""},e.onkeydown=e.onclick,e.onsearch=function(){e.setAttribute("dir","rtl"),e.placeholder="üîé",e.blur(),h()},e.onblur=e.onsearch,e.onkeyup=function(){this.value||(e.setAttribute("dir","rtl"),e.placeholder="üîé"),y(this.value)}}()}setTimeout(function(){t.style.width=getComputedStyle(document.querySelector(".se-emojis")).width},50)}},h=function(){const e=document.querySelector('div[name="'+l+'"]');e.innerText="",e.style.display="none";for(var[t,n]of m.groups.entries())document.querySelector('div[name="'+(n||a)+'"]').parentElement.style.visibility="visible"},y=function(t){if(t){{const s=document.querySelector('div[name="'+l+'"]');s.innerHTML="",s.style.display="block";for(var[e,n]of m.groups.entries())n&&(document.querySelector('div[name="'+n+'"]').parentElement.style.visibility="collapse");document.querySelector(".se-emojis-layer").scrollTop=0}t=t.toLowerCase();const o=document.querySelector('div[name="'+l+'"]');for(var i in r.emojis)r.emojis[i].forEach(function(e){e&&-1<e.name.toLowerCase().indexOf(t)&&j(e,o)})}else h()},i=function(){const t=document.querySelector('.se-emojis div[name="'+a+'"]');t.innerText="",r.emojis&&r.emojis[""]&&r.emojis[""].forEach(function(e){j(e,t)}),d(t)},j=function(e,t){switch(r.isSupported(e.emoji)){case 0:return;case 1:break;case 2:if(!m.showFallbacks)return}const n=document.createElement("button");var i=e.skintone&&"neutral"!==m.skinTone?r.toSkinTone(Object.assign({},e).emoji,m.skinTone):e.emoji,o=e.name.charAt(0).toUpperCase()+e.name.slice(1);n.className="btn-emoji",n.type="button",n.title=o,n.innerHTML='<span class="emoji" data-emoji="'+e.emoji+'">'+i+"</span>",n.addEventListener("click",v.bind()),t.appendChild(n)},v=function(e){const t=e.target.querySelector("span");var e=t.innerText,n=t.getAttribute("data-emoji");"string"==typeof m.tagName?o.functions.insertHTML(`<${m.tagName} class="se-emoji">${e}</${m.tagName}>&zwnj;`,!0,!0):o.functions.insertHTML(e,!0),m.showRecent&&r.registerEmoji(n)&&i()};return{name:"emojis",display:"submenu",innerHTML:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" id="smiley"><path fill="#444" d="M8 1c3.9 0 7 3.1 7 7s-3.1 7-7 7-7-3.1-7-7 3.1-7 7-7zm0-1C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8-3.6-8-8-8z"></path><path fill="#444" d="M8 13.2c-2 0-3.8-1.2-4.6-3.1l.9-.4c.6 1.5 2.1 2.4 3.7 2.4s3.1-1 3.7-2.4l.9.4c-.8 2-2.6 3.1-4.6 3.1zM7 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM11 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path></svg>',title:"Insert Emojis",add:function(e,t){o=e;{var n=function(e,t,n){function i(){m[e]=s[e],console.warn(`emojis.${e} should be of type `+t)}"array"===t?Array.isArray(m[e])||i():typeof m[e]!==t&&i()};o.options.emojis&&(!1===o.options.emojis.captions&&(o.options.emojis.captions=Array(u.length).fill("")),m=Object.assign({},m,o.options.emojis),n("groups","array"),n("captions","array"),n("iconSize","string"),n("skinTone","string"),n("showFallbacks","boolean"))}let i=function(e){const t=m.topmenu&&(m.topmenu.search||m.topmenu.iconSize||m.topmenu.skinTone);let n=this.util.createElement("div"),i=(n.className="se-submenu se-list-layer se-emojis-layer",n.style.paddingTop=0,'<div class="se-list-inner" XXstyle="margin-top:2rem;"Xstyle="position:relative;padding-left:3px;top:-5px;">');if(i+='<div class="se-emojis">',t){i+="<div>";i+='<div name="'+c+'" class="topmenu"></div>';i+="</div>"}if(m.showRecent){m.groups.unshift("");m.captions.unshift("");let e='style="';e+=t?'margin-top:2.2rem;"':'"';i+='<div name="'+a+'" '+e+"></div>"}if(t&&m.topmenu.search)i+='<div name="'+l+'" class="se-emojis-group" style="font-size:'+m.iconSize+';"></div>';for(const[o,s]of m.groups.entries())if(s)if(u.includes(s)){i+='<div class="se-emojis-group" style="font-size:'+m.iconSize+';">';if(m.captions[o])i+="<header>"+(m.captions[o]||s)+"</header>";i+='<div name="'+s+'"></div>';i+="</div>"}else console.warn('group "'+s+'" is not valid');return i+="</div>",n.innerHTML=i,n}.call(e);f(i),p(i.querySelector('div[name="'+c+'"]')),d(i.querySelector('div[name="'+a+'"]')),e.initMenuTarget("emojis",t,i),m.height&&(document.querySelector(".se-emojis").style.height=m.height,document.querySelector(".se-emojis-layer").style.overflowY="hidden"),m.width&&(document.querySelector(".se-emojis").style.width=m.width)}}}(Emojis);